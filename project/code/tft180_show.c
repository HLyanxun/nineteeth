/*
 * tft180_show.c
 *
 *  Created on: 2024年3月11日
 *      Author: pc
 */
#include "zf_common_headfile.h"

uint8 ex_smartcar_state_detection_flag;
const uint8 che_shen_bai_zheng[8][16]=
{
        {0x02,0x00,0x02,0x00,0x02,0x00,0x7F,0xFC,0x04,0x00,0x09,0x00,0x11,0x00,0x21,0x00},
        {0x3F,0xF8,0x01,0x00,0x01,0x00,0xFF,0xFE,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00},/*"车",0*/
        {0x02,0x00,0x04,0x00,0x1F,0xF0,0x10,0x10,0x1F,0xF0,0x10,0x10,0x1F,0xF2,0x10,0x14},
        {0x10,0x18,0x7F,0xF0,0x00,0x50,0x00,0x90,0x03,0x10,0x1C,0x10,0xE0,0x50,0x00,0x20},/*"身",1*/
        {0x10,0x00,0x13,0xFE,0x12,0x52,0x12,0x52,0xFB,0xFE,0x10,0x20,0x14,0x20,0x19,0xFC},
        {0x30,0x20,0xD0,0x20,0x17,0xFE,0x10,0x40,0x10,0x88,0x11,0x04,0x53,0xFE,0x21,0x02},/*"摆",2*/
        {0x00,0x00,0x7F,0xFC,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x11,0x00,0x11,0xF8},
        {0x11,0x00,0x11,0x00,0x11,0x00,0x11,0x00,0x11,0x00,0x11,0x00,0xFF,0xFE,0x00,0x00},/*"正",3*/
};
const uint8 dang_qian_lu_duan[8][16]=
{
        {0x01,0x00,0x21,0x08,0x11,0x08,0x09,0x10,0x09,0x20,0x01,0x00,0x7F,0xF8,0x00,0x08},
        {0x00,0x08,0x00,0x08,0x3F,0xF8,0x00,0x08,0x00,0x08,0x00,0x08,0x7F,0xF8,0x00,0x08},/*"当",0*/
        {0x10,0x10,0x08,0x10,0x08,0x20,0xFF,0xFE,0x00,0x00,0x3E,0x08,0x22,0x48,0x22,0x48},
        {0x3E,0x48,0x22,0x48,0x22,0x48,0x3E,0x48,0x22,0x08,0x22,0x08,0x2A,0x28,0x24,0x10},/*"前",1*/
        {0x00,0x40,0x7C,0x40,0x44,0x78,0x44,0x88,0x45,0x50,0x7C,0x20,0x10,0x50,0x10,0x88},
        {0x11,0x06,0x5C,0xF8,0x50,0x88,0x50,0x88,0x50,0x88,0x5C,0x88,0xE0,0xF8,0x00,0x88},/*"路",2*/
        {0x06,0x00,0x38,0xF8,0x20,0x88,0x20,0x88,0x20,0x88,0x3C,0x86,0x21,0x00,0x20,0x00},
        {0x3D,0xFC,0x20,0x84,0x20,0x88,0x2C,0x50,0xF0,0x20,0x20,0x50,0x20,0x88,0x23,0x06},/*"段",3*/
};
const uint8 huan_dao[8][16]=
{
        {0x00,0x00,0x00,0x00,0xFD,0xFE,0x10,0x10,0x10,0x10,0x10,0x20,0x10,0x20,0x7C,0x68},
        {0x10,0xA4,0x11,0x22,0x12,0x22,0x10,0x20,0x1C,0x20,0xE0,0x20,0x40,0x20,0x00,0x20},/*"环",0*/
        {0x01,0x00,0x02,0x00,0x1F,0xF0,0x10,0x10,0x12,0x10,0x11,0x50,0x10,0x20,0x10,0x00},
        {0x1F,0xFC,0x02,0x04,0x22,0x24,0x22,0x24,0x3F,0xE4,0x00,0x04,0x00,0x28,0x00,0x10},/*"岛",1*/
};
//------------------------------'---------------------------------------------------------------------------------------------------------------
// 函数简介     各项参数显示的初始化
// 使用实例     image_parameter_show_init()
//---------------------------------------------------------------------------------------------------------------------------------------------
void image_parameter_show_init(void)
{
    smartcar_state_detection_show(1,1);
}
//---------------------------------------------------------------------------------------------------------------------------------------------
// 函数简介     检测车身摆正
// 使用示例     smartcar_state_show(0,0);
//---------------------------------------------------------------------------------------------------------------------------------------------
void smartcar_state_detection_show(uint8 x,uint8 y)
{
    if(smartcar_state_detection()==1)
    {
        ex_smartcar_state_detection_flag=1;
    }
    else
    {
        ex_smartcar_state_detection_flag=0;
    }
    tft180_show_chinese(x, y, 16, che_shen_bai_zheng[0], 4, RGB565_BLACK);
    tft180_show_string((x+4),y,":");
    tft180_show_int((x+5), y, ex_smartcar_state_detection_flag, 1);
}
//----------------------------------------------------------------------------------------------------------------------------------------------
// 函数简介     当前经过路段
// 使用实例
//----------------------------------------------------------------------------------------------------------------------------------------------
void passing_section(uint8 x,uint8 y)
{
    tft180_show_chinese(x, y, 16, dang_qian_lu_duan[0], 4, RGB565_BLACK);
    tft180_show_string((x+4),y,":");
    if(ex_roundabout_type==1 || ex_roundabout_type==2)//环岛判定
    {
        tft180_show_chinese((x+5), y, 16, huan_dao[0], 2, RGB565_BLACK);
        return;
    }
    if(crossroad_detection()==1)
    {

    }
}
//--------------------------------------------------------------------------------------------------------------------------
// 函数简介     将寻线所得边线可视化显示
//--------------------------------------------------------------------------------------------------------------------------
void line_visualization()
{
    for(uint8 i=find_end;i>find_start;i--)
    {
        tft180_draw_point(ex_leftline[i],i,RGB565_RED);//将左边线显示为红色
        tft180_draw_point(ex_midline[i],i,RGB565_RED);//将中线边线显示为红色
        tft180_draw_point(ex_rightline[i],i,RGB565_RED);//将右边线显示为红色
    }
}
